<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Compiling the OSSEC Windows Agent on Windows &#8212; OSSEC</title>
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/bootstrap-3.2.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/bootstrap-3.2.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/parallax.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/js/jquery-1.11.0.min.js"></script>
    <script src="../../../_static/js/jquery-fix.js"></script>
    <script src="../../../_static/bootstrap-3.2.0/js/bootstrap.min.js"></script>
    <script src="../../../_static/bootstrap-sphinx.js"></script>
    <link rel="author" title="About these documents" href="../../../about.html" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Requirements" href="compile-ossec-mingw.html" />
    <link rel="prev" title="Unattended Source Installation" href="install-source-unattended.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-138780766-1"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'UA-138780766-1');
</script>

<script type="text/javascript">
  var _ss = _ss || [];
  _ss.push(['_setDomain', 'https://koi-3QNN51VTHS.marketingautomation.services/net']);
  _ss.push(['_setAccount', 'KOI-4APYNOYP8O']);
  _ss.push(['_trackPageView']);
  window._pa = window._pa || {};
  // _pa.orderId = "myOrderId"; // OPTIONAL: attach unique conversion identifier to conversions
  // _pa.revenue = "19.99"; // OPTIONAL: attach dynamic purchase values to conversions
  // _pa.productId = "myProductId"; // OPTIONAL: Include product ID for use with dynamic ads
  (function() {
  var ss = document.createElement('script');
  ss.type = 'text/javascript'; ss.async = true;
  ss.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'koi-3QNN51VTHS.marketingautomation.services/client/ss.js?ver=2.4.0';
  var scr = document.getElementsByTagName('script')[0];
  scr.parentNode.insertBefore(ss, scr);
  })();
  </script>



  </head><body>

  <div id="navbar" class="navbar navbar-inverse navbar-default ">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../../index.html"><img src="../../../_static/ossec_logo_bare_small.png">
          OSSEC</a>
        <span class="navbar-text navbar-version pull-left"><b>3.6.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="https://www.ossec.net/about/">About</a></li>
                <li><a href="https://www.ossec.net/docs/">Documentation</a></li>
                <li><a href="https://www.ossec.net/register-for-ossec/">Get OSSEC+</a></li>
                <li><a href="https://www.ossec.net/downloads/">Downloads</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Manual</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../faq/index.html">Frequently asked questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cookbooks/index.html">User submitted Cookbooks</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../development/build/index.html">Build, compile, and not much more</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development/oRFC/index.html">oRFC:</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../syntax/index.html">Syntax and Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../formats/index.html">Output Formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../programs/index.html">Man pages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/index.html">Examples</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="install-source-unattended.html" title="Previous Chapter: Unattended Source Installation"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Unattended So...</span>
    </a>
  </li>
  <li>
    <a href="compile-ossec-mingw.html" title="Next Chapter: Requirements"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Requirements &raquo;</span>
    </a>
  </li>
              
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="compiling-the-ossec-windows-agent-on-windows">
<span id="compile-ossec-on-windows"></span><h1>Compiling the OSSEC Windows Agent on Windows<a class="headerlink" href="#compiling-the-ossec-windows-agent-on-windows" title="Permalink to this headline">¶</a></h1>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>As of 2.9 this is no longer supported. The Windows agent can be built on <a class="reference external" href="../installation/compile-ossec-mingw.html">Linux systems</a>.
Patches to update the Windows compilation support are very welcome.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Originally posted <a class="reference external" href="http://www.immutablesecurity.com/index.php/2010/07/06/compiling-the-ossec-agent-on-windows/">Compiling the OSSEC Windows Agent on Windows</a>
by <a class="reference external" href="http://www.immutablesecurity.com/index.php/author/mstarks/">mstarks</a>,
duplicated here with permission.</p>
</div>
<p>Most people that use the OSSEC Windows agent <a class="reference external" href="http://www.ossec.net/main/downloads/">download a pre-compiled</a> copy from the OSSEC site. While that is a good option for many individual users, it may not suit those with more specific needs and/or those in enterprise environments. Users who fall into those categories could benefit from customizing the agent and maintaining internal builds in order to suit their individual needs.</p>
<p>There are already instructions on <a class="reference external" href="http://dcid.me/2009/06/compiling-the-windows-agent-from-a-linux-system/">how to compile the Windows agent on Linux</a>, but ironically the process doesn’t work so well on Windows. I had a need to make this work on Windows, so I thought I would share the process with you.</p>
<div class="section" id="requirements">
<h2>Requirements:<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>The <a class="reference external" href="http://nsis.sourceforge.net/Download">Nullsoft Scriptable Install System</a> (NSIS)</p></li>
<li><p>The <a class="reference external" href="http://sourceforge.net/downloads/mingw/">Minimalist GNU for Windows (MinGW) compiler</a></p></li>
<li><p>My <a class="reference external" href="http://www.immutablesecurity.com/wp-content/wp_uploads/gen_win.txt">batch file.</a>  Simply rename from gen_win.txt to gen_win.cmd.</p></li>
<li><p><a class="reference external" href="http://www.7-zip.org/download.html">7-Zip for Windows</a></p></li>
<li><p>The public domain <a class="reference external" href="http://www.efgh.com/software/unix2dos.htm">Unix2DOS utility</a></p></li>
<li><p>The latest OSSEC for <a class="reference external" href="http://www.ossec.net/main/downloads/">Unix/Linux</a> (this contains the Windows source code)</p></li>
</ul>
</div>
<div class="section" id="here-are-the-steps">
<h2>Here are the steps:<a class="headerlink" href="#here-are-the-steps" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><p>Download and install the required programs. Be sure to pay special attention to the <a class="reference external" href="http://www.mingw.org/wiki/Getting_Started">steps for properly installing and configuring MinGW</a>, particularly the part about modifying the PATH environment variable.</p></li>
<li><p>Next, we.re going to extract OSSEC using 7-Zip. To do so, simply right-click on the file and select 7-Zip, extract to “folder name.tar,” where folder name is the name of the package. This decompresses the archive. Navigate within that folder and repeat this step to untar the archive. At this point, you should see all of the files in the package.</p></li>
<li><p>Place gen_win.txt in the <code class="docutils literal notranslate"><span class="pre">src\win32</span></code> folder and rename the extension to .cmd.</p></li>
<li><p>Download Unix2DOS and place it in the <code class="docutils literal notranslate"><span class="pre">src\win32</span></code> folder</p></li>
<li><p>Open a command prompt. Navigate to <code class="docutils literal notranslate"><span class="pre">src\win32</span></code>, make any desired customizations, and execute gen_win.cmd. This should gather all of the required files and place them in <code class="docutils literal notranslate"><span class="pre">src\win-pkg</span></code>.</p></li>
<li><p>Next, we compile the Windows agent by navigating to <code class="docutils literal notranslate"><span class="pre">src\win-pkg</span></code> and executing make.bat (I assume you have the chops to know how to change directories :) ).</p></li>
<li><p>Now we have all of the files we need but no way to effectively install it. To generate the installer, simply execute the NSIS compiler like so: <code class="docutils literal notranslate"><span class="pre">&quot;c:\Program</span> <span class="pre">Files\NSIS\makensis.exe&quot;</span> <span class="pre">ossec-installer.nsi</span></code></p></li>
</ol>
<p>If you see no errors and a binary named ossec-win32-agent.exe, everything was successful. Congratulations, you now have a custom-made version of OSSEC!</p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2010-2021, OSSEC Project Team.<br/>
    OSSEC <b>ossec.net</b> domain owned and maintained by <a href="https://www.ossec.net" target="_blank">OSSEC Foundation</a><br/>
    Home page graphics courtesy of <a href="https://pixabay.com" target="_blank">pixabay</a>
    </p>
  </div>
</footer>
  </body>
</html>